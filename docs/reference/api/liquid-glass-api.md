# Liquid Glass UI - State Management API

## Overview
Liquid Glass UI 2.0 uses **Zustand** for state management, replacing the legacy React Context API. This provides better performance (no unnecessary re-renders), persistence, and a cleaner API.

## Core Hook: `useTheme`

The `useTheme` hook is the primary entry point for accessing and modifying the UI state.

```tsx
import { useTheme } from '@/hooks/useTheme';

const component = () => {
    const { theme, toggleTheme, setGlassIntensity } = useTheme();
    // ...
}
```

### Properties

#### Theme Mode
- `theme`: `'light' | 'dark'` - Current active mode.
- `toggleTheme()`: Toggle between light and dark modes.

#### Glass Customization
- `glassIntensity`: `number` (0-100) - Global glass intensity.
- `setGlassIntensity(value)`: Set global intensity.
- `blurStrength`: `number` (0-100) - Base blur strength (px).
- `setBlurStrength(value)`: Set base blur.
- `glassMaterial`: `string` - Default material preset.
- `saturation`: `number` (0-200) - Backdrop saturation %.

#### Visual Settings
- `glassRadius`: `number` - Global border radius (px).
- `setGlassRadius(value)`: Set global radius.
- `accentColor`: `string` - Primary accent color hex.
- `performanceMode`: `boolean` - If proper, disables heavy effects.

## Store Architecture

The store is split into slices for modularity:
- `modeSlice`: Handles Light/Dark mode and System preference.
- `glassSlice`: Handles Glass effect variables (blur, saturation).
- `visualSlice`: Handles Layout and Visual properties (radius, colors).
- `themePresetsSlice`: Manages built-in and custom theme configs.
- `performanceSlice`: Handles performance optimizations (reduced motion, etc).

## Migration Guide

If you were using `useContext(ThemeContext)`, replace it with `useTheme()`.
The API is backward compatible for most common properties.

### Legacy Contexts (Removed)
- `ThemeContext` -> `useTheme`
- `GlassStyleContext` -> `useTheme`
- `ThemeCoreContext` -> `useTheme`
- `UnifiedThemeProvider` -> No longer needed (Store is global).

---

## LiquidProvider Context

### Overview

The `LiquidProvider` is required for AI-powered "Smart" components that need access to the Liquid Engine client for generating content.

### Components Requiring LiquidProvider

| Component | Description | Fallback Without Provider |
|-----------|-------------|---------------------------|
| `GlassSmartCard` | AI-generated content cards | Throws context error |
| `GlassSmartList` | AI-generated list items | Throws context error |
| `GlassSmartBadge` | AI-categorized badges | Throws context error |
| `GlassSmartChart` | AI-recommended visualizations | Throws context error |

### Usage

```tsx
import { LiquidProvider } from '@/liquid-engine/react';
import { GlassSmartCard } from '@/components/generative/GlassSmartCard';

function App() {
    return (
        <LiquidProvider>
            <GlassSmartCard prompt="Generate a card about..." />
        </LiquidProvider>
    );
}
```

### Showcase Panel Handling

In the **GlassShowcasePanel** component library browser, Smart components are displayed as placeholders since the showcase renders outside the LiquidProvider context:

```tsx
// Placeholder used in GlassShowcasePanel
<GlassContainer className="p-4 w-64" border>
    <div className="flex items-center gap-2 mb-3">
        <Sparkles size={16} className="text-purple-400" />
        <span>AI-Generated</span>
    </div>
    <p>Smart Card content would be generated by AI based on your prompt...</p>
</GlassContainer>
```

### Error Handling

If a Smart component is used without LiquidProvider, you'll see:
```
Error: useLiquidClient must be used within a LiquidProvider or LiquidSessionProvider
```

**Solution:** Wrap your component tree with `<LiquidProvider>` or use placeholder content in contexts where the provider isn't available.

---

## Component Library Browser

Access all 161+ Glass components through the **GlassShowcasePanel**:

- **Location:** `src/components/settings/GlassShowcasePanel.tsx`
- **Access:** Click Sparkles icon in GlassDock (Liquid OS layout)
- **Features:** Search, filtering, live previews, code snippets

See `CLAUDE.md` â†’ "Component Showcase Panel" section for detailed documentation.
